:- module(proylcc, 
	[  
		randomBlock/2,
		shoot/5	
	]).

/**
 * randomBlock(+Grid, -Block)
 */

randomBlock([
	4,2,8,64,32,
	2,-,-,4,16,
	-,-,-,-,2,
	-,-,-,-,16,
	-,-,-,-,2,
	-,-,-,-,-,
	-,-,-,-,-
], 2).

randomBlock(_Grid, 4).

/**
 * shoot(+Block, +Column, +Grid, +NumOfColumns, -Effects) 
 * RGrids es la lista de grillas representando el efecto, en etapas, de combinar las celdas del camino Path
 * en la grilla Grid, con número de columnas NumOfColumns. El número 0 representa que la celda está vacía. 
 */

shoot(2, 1, 
	[
		4,2,8,64,32,
		2,-,-,4,16,
		-,-,-,-,2,
		-,-,-,-,16,
		-,-,-,-,2,
		-,-,-,-,-,
		-,-,-,-,-
	], 5,
	[
		effect([
			4,2,8,64,32,
			2,-,-,4,16,
			2,-,-,-,2,
			-,-,-,-,16,
			-,-,-,-,2,
			-,-,-,-,-,
			-,-,-,-,-
		], []),
		effect([
			4,2,8,64,32,
			4,-,-,4,16,
			-,-,-,-,2,
			-,-,-,-,16,
			-,-,-,-,2,
			-,-,-,-,-,
			-,-,-,-,-
		], [newBlock(4)]),
		effect([
			8,2,8,64,32,
			-,-,-,4,16,
			-,-,-,-,2,
			-,-,-,-,16,
			-,-,-,-,2,
			-,-,-,-,-,
			-,-,-,-,-
		], [newBlock(8)])
	]
).

shoot(2, 2, 
	[
		4,2,8,64,32,
		2,-,-,4,16,
		-,-,-,-,2,
		-,-,-,-,16,
		-,-,-,-,2,
		-,-,-,-,-,
		-,-,-,-,-
	], 5,
	[
		effect([
			4,2,8,64,32,
			2,2,-,4,16,
			-,-,-,-,2,
			-,-,-,-,16,
			-,-,-,-,2,
			-,-,-,-,-,
			-,-,-,-,-
		], []),
		effect([
			4,-,8,64,32,
			-,8,-,4,16,
			-,-,-,-,2,
			-,-,-,-,16,
			-,-,-,-,2,
			-,-,-,-,-,
			-,-,-,-,-
		], [newBlock(8)]),
		effect([
			4,8,8,64,32,
			-,-,-,4,16,
			-,-,-,-,2,
			-,-,-,-,16,
			-,-,-,-,2,
			-,-,-,-,-,
			-,-,-,-,-
		], []),
		effect([
			4,16,-,64,32,
			-,-,-,4,16,
			-,-,-,-,2,
			-,-,-,-,16,
			-,-,-,-,2,
			-,-,-,-,-,
			-,-,-,-,-
		], [newBlock(16)])
	]
).

shoot(2, 3, 
	[
		4,2,8,64,32,
		2,-,-,4,16,
		-,-,-,-,2,
		-,-,-,-,16,
		-,-,-,-,2,
		-,-,-,-,-,
		-,-,-,-,-
	], 5,
	[
		effect([
			4,2,8,64,32,
			2,-,2,4,16,
			-,-,-,-,2,
			-,-,-,-,16,
			-,-,-,-,2,
			-,-,-,-,-,
			-,-,-,-,-
		], [])
	]
).

shoot(2, 4, 
	[
		4,2,8,64,32,
		2,-,-,4,16,
		-,-,-,-,2,
		-,-,-,-,16,
		-,-,-,-,2,
		-,-,-,-,-,
		-,-,-,-,-
	], 5,
	[
		effect([
			4,2,8,64,32,
			2,-,-,4,16,
			-,-,-,2,2,
			-,-,-,-,16,
			-,-,-,-,2,
			-,-,-,-,-,
			-,-,-,-,-
		], []),
		effect([
			4,2,8,64,32,
			2,-,-,4,16,
			-,-,-,4,-,
			-,-,-,-,16,
			-,-,-,-,2,
			-,-,-,-,-,
			-,-,-,-,-
		], [newBlock(4)]),
		effect([
			4,2,8,64,32,
			2,-,-,4,16,
			-,-,-,4,16,
			-,-,-,-,2,
			-,-,-,-,-,
			-,-,-,-,-,
			-,-,-,-,-
		], []),
		effect([
			4,2,8,64,32,
			2,-,-,8,32,
			-,-,-,-,2,
			-,-,-,-,-,
			-,-,-,-,-,
			-,-,-,-,-,
			-,-,-,-,-
		], [newBlock(8), newBlock(32)]),
		effect([
			4,2,8,64,64,
			2,-,-,8,2,
			-,-,-,-,-,
			-,-,-,-,-,
			-,-,-,-,-,
			-,-,-,-,-,
			-,-,-,-,-
		], [newBlock(64)]),		
		effect([
			4,2,8,-,128,
			2,-,-,8,2,
			-,-,-,-,-,
			-,-,-,-,-,
			-,-,-,-,-,
			-,-,-,-,-,
			-,-,-,-,-
		], []),			
		effect([
			4,2,8,8,128,
			2,-,-,-,2,
			-,-,-,-,-,
			-,-,-,-,-,
			-,-,-,-,-,
			-,-,-,-,-,
			-,-,-,-,-
		], [newBlock(128)]),			
		effect([
			4,2,-,16,128,
			2,-,-,-,2,
			-,-,-,-,-,
			-,-,-,-,-,
			-,-,-,-,-,
			-,-,-,-,-,
			-,-,-,-,-
		], [newBlock(16)])
	]
).

shoot(2, 5, 
	[
		4,2,8,64,32,
		2,-,-,4,16,
		-,-,-,-,2,
		-,-,-,-,16,
		-,-,-,-,2,
		-,-,-,-,-,
		-,-,-,-,-
	], 5,
	[
		effect([
			4,2,8,64,32,
			2,-,-,4,16,
			-,-,-,-,2,
			-,-,-,-,16,
			-,-,-,-,2,
			-,-,-,-,2,
			-,-,-,-,-
		], []),
		effect([
			4,2,8,64,32,
			2,-,-,4,16,
			-,-,-,-,2,
			-,-,-,-,16,
			-,-,-,-,4,
			-,-,-,-,-,
			-,-,-,-,-
		], [newBlock(4)])
	]
).